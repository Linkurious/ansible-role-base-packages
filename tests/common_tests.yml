---

# Tests for base-packages role

- name: If user disable installation of packages, install nothing
  fail:
    msg: "User disable ipackage installation but Packages installed"
  when:
    - base_packages_test_disable_installation
    - base_packages_installed is defined

- debug:
    var: base_packages_install

- name: If packages list set by user, install it
  fail:
    msg: "If user define a package list, install these packages"
  when:
    - base_packages_test_with_user_list
    - "{{ base_packages_install.results[0].item | length != 2 }}"

- name: If not packages list set by user, install os default
  fail:
    msg: "Packages installed are differents than default os if no user setting"
  when:
    - base_packages_test_with_default_list
    - "{{
        (base_packages_install.results[0].item | length)
        != (base_packages_simples_list | length)
      }}"

